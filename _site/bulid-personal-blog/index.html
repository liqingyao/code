<!DOCTYPE html> <html lang="pt-br"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> Jekyll 个人静态博客建站及优化 </title> <meta name="description" content="写博客要追溯到高中，用百度空间记录生活和想法，坚持了四年多，直到大二时被盗号，申诉多次没有追回帐号，就没再写过。研二重整旗鼓，买了域名和服务，在 WordPress 上搭了个人博客，想模仿牛人写些技术博客。最近在面试时，面试官提到了我的博客，建议我用 GitHub 和 Jekyll 建站试试，于是我就开始捯饬着搬..."> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://code.liqingyao.com/bulid-personal-blog/"> <link rel="alternate" type="application/rss+xml" title="Li Qingyao" href="http://code.liqingyao.com/feed.xml" /> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-52446115-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-70794446-1', 'code.liqingyao.com'); ga('send', 'pageview'); </script> <meta name="robots" content="noindex"> <!--===== Please remove it ! ! ! ======--> <meta name="googlebot" content="noindex"> <!--===== Please remove it ! ! ! ======--> </head> <body class="bulid-personal-blog"> <main class="main"> <header class="header"> <div class="overlay"> <div class="container"> <h1 class="title"> <a href="http://liqingyao.com">Li Qingyao</a> </h1> <nav class="navbar"> <a href="#" class="menu-icon"> <span></span> <span></span> <span></span> </a> <ul class="nav"> <li><a href="/about/">About</a></li> <li><a href="/categories/">Categories</a></li> <li><a href="/">Home</a></li> </ul> </nav> </div> <!-- --> </div> </header> <article class="post container card"> <header class="post-header"> <h1 class="post-title">Jekyll 个人静态博客建站及优化</h1> <span class="post-meta"> <time class="post-date" datetime="2015-11-20">Nov 20, 2015</time> <span class="post-author"> &bull; in 其他</span> </span> </header> <div class="post-content"> <p>写博客要追溯到高中，用百度空间记录生活和想法，坚持了四年多，直到大二时被盗号，申诉多次没有追回帐号，就没再写过。研二重整旗鼓，买了域名和服务，在 WordPress 上搭了个人博客，想模仿牛人写些技术博客。最近在面试时，面试官提到了我的博客，建议我用 GitHub 和 Jekyll 建站试试，于是我就开始捯饬着搬迁和建立工作。</p> <p>发现自己经历了<a href="http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html">阮一峰</a>说的写博客的三个阶段:</p> <blockquote> <p>第一阶段，刚接触 Blog，觉得很新鲜，试着选择一个免费空间来写。</p> <p>第二阶段，发现免费空间限制太多，就自己购买域名和空间，搭建独立博客。</p> <p>第三阶段，觉得独立博客的管理太麻烦，最好在保留控制权的前提下，让别人来管，自己只负责写文章。</p> </blockquote> <p>从零开始搭博客挺好玩，也可以趁此机会学一些前端。按照<a href="http://beiyuu.com/github-pages/">教程</a>一步步走完后，博客初见规模。要做到更好还要考虑性能优化、网站分析和其他功能，有很多可以挖掘的，完全看个人喜好和发挥。当然最重要还是内容。弄完后才知道一篇华丽丽的牛人博客，其实很花心思！相关的建站教程很多，我就结合自己的建站过程整理下思路，有兴趣的也可以直接在 Github 上 clone。</p> <p>###<strong>确定环境和架构</strong></p> <p><strong>1. <a href="https://pages.github.com/">GitHub Pages</a></strong></p> <p>用 GitHub 托管博客的好处是方便查看和共享、轻量级、干净简单、还可以绑定域名。配合 Jekyll / Hexo / Ghost 等博客系统站内生成网页，直接在本地 repo 更新、发布博客，可以更专注于码字。</p> <p>首先去官网看一下文档：</p> <ul> <li> <p><a href="https://help.github.com/categories/github-pages-basics/">基础教程</a>主要看一下 Pages 的用法、怎么用 Jekyll 和配置域名</p> </li> <li> <p><a href="https://help.github.com/categories/github-pages-features/">进阶版</a>了解下 Pages 还有订阅、表情、重定向、Sitemap 等功能和插件</p> </li> </ul> <p><strong>2. <a href="http://jekyllrb.com/">Jekyll</a></strong></p> <p>对<a href="http://www.zhihu.com/question/21981094">博客系统的讨论</a>很多，</p> <ul> <li> <p>Hexo：基于 Node.js，因为文章生成速度快、操作简单、命令精简而受欢迎；本地直接生成网页上传 Github</p> </li> <li> <p>Jekyll：基于 Ruby；Github 原生，上传到 Github 后自动转换成网页；据说 Geek 更喜欢 Jekyll， 所以就选了它</p> </li> </ul> <p>接着去 Jekyll 官网看一下文档：</p> <ul> <li> <p>搞清楚<a href="http://jekyllrb.com/docs/structure/">文件目录框架</a>和<a href="http://jekyllrb.com/docs/frontmatter/">语法元素</a>的用法</p> </li> <li> <p>了解 Jekyll 还可以安装许多插件</p> </li> </ul> <p><strong>3. 站点结构</strong></p> <p>GitHub 支持<a href="https://help.github.com/articles/user-organization-and-project-pages/">两种形式的 Pages</a>：</p> <ul> <li> <p>User &amp; Organization Pages：</p> <p>为每个用户准备的主页，通过建立名为 <code class="highlighter-rouge">&lt;username&gt;.github.io</code> 的 repo 激活，建立后可通过 <code class="highlighter-rouge">http(s)://&lt;username&gt;.github.io</code> 访问；<code class="highlighter-rouge">username</code> 是 Github 用户名，每个用户只能建一个，内容在 <code class="highlighter-rouge">master</code> 分支修改和提交。</p> </li> <li> <p>Project Pages：</p> <p>为 Github 项目准备的描述页面，博客也可使用这种形式配置模板、发布内容；用户可以建多个 Project Pages，新建 <code class="highlighter-rouge">gh-pages</code> 分支并在里面修改和提交，可通过 <code class="highlighter-rouge">http(s)://&lt;username&gt;.github.io/&lt;projectname&gt;</code> 访问。</p> </li> </ul> <p>GitHub 支持两种形式自定义域名：</p> <ul> <li> <p>Apex domains(一级域名)：在 DNS 提供商也就是 Godady 上修改 A 记录指向 GitHub 的 IP</p> </li> <li> <p>Subdomains(二级域名)：在 Godaddy 上申请一个 CNAME 记录</p> </li> </ul> <p>我参考了<a href="http://http://www.wileam.com">Wileam</a>组织结构，一级域名作为网站导航，博客、project等子项目分别建在二级域名上，方便管理和分类、可以灵活用不同主题，也防止 <a href="http://myweb.jowai.info/bind-subdomain-on-godaddy-for-github-pages/">Github 不再支持直接指向 IP 地址的 A Host 导致没法查看文章</a>。</p> <p>架构如下：</p> <p align="center"> <img width="420px" height="180px" src="/images/structure.png" /> </p> <p>分别建立 repo:</p> <ul> <li> <p>一级域名用 <code class="highlighter-rouge">User &amp; Organization Pages</code>，直接在 <code class="highlighter-rouge">master</code> 分支 commit</p> </li> <li> <p>二级域名用 <code class="highlighter-rouge">Project Pages</code>，新建并在<code class="highlighter-rouge">gh-pages</code>分支 commit</p> </li> </ul> <p>###<strong>绑定域名</strong></p> <p><strong>1. 购买域名</strong></p> <p>在 <a href="https://www.godaddy.com/">godaddy</a> 上挑一个没被注册的域名，付钱搞定。一般第一次付款的折扣力度比较大，可以一下多买几年。</p> <p><strong>2. <a href="https://help.github.com/articles/tips-for-configuring-an-a-record-with-your-dns-provider/">绑定一级域名</a></strong></p> <p>配置 Godaddy：</p> <ol> <li> <p>配置 A 记录：每个域名只有一个 A 记录，修改 A 记录指向 IP 地址 <code class="highlighter-rouge">192.30.252.153</code> 或者 <code class="highlighter-rouge">192.30.252.154</code></p> </li> <li> <p>配置 www 子域名：新建或修改 www 的 CNAME 记录，指向 A 记录，这样有无 www 的两个网站就能相互跳转</p> </li> </ol> <p>配置本地 repo：向根目录添加或修改 CNAME 文件，内容为自己的一级域名 <code class="highlighter-rouge">domain</code>, 此时浏览器输入一级域名就能实现跳转</p> <p><strong>3. <a href="http://myweb.jowai.info/bind-subdomain-on-godaddy-for-github-pages/">绑定二级域名</a></strong></p> <p>配置 Godaddy Zone File:</p> <ol> <li> <p>添加一条 Record，选择 CNAME(Alias)</p> </li> <li> <p>填写 Host 为二级域名，并指向自己的一级域名</p> </li> </ol> <p>配置本地 repo:</p> <ol> <li> <p>向根目录添加或修改 CNAME 文件，内容为自己的二级域名 <code class="highlighter-rouge">&lt;subdomain&gt;</code></p> </li> <li> <p>修改根目录 <code class="highlighter-rouge">_config.yml</code> 配置文件中的 <code class="highlighter-rouge">url: http://&lt;subdomain&gt;.&lt;domain&gt;</code></p> </li> </ol> <p>###<strong>运行起来</strong></p> <p><strong>1. <a href="http://jekyllrb.com/docs/installation/">安装 Jekyll</a></strong></p> <ul> <li> <p><a href="https://ruby.taobao.org/">安装 Ruby / Rubygems </a></p> </li> <li> <p><code class="highlighter-rouge">$ gem install jekyll</code></p> </li> </ul> <p><strong>2. 选个喜欢的模板</strong></p> <ul> <li> <p>主页：在 <a href="http://www.free-css.com/free-css-templates">Free CSS</a> 上找单页模板，下载到一级域名对应 repo 的 <code class="highlighter-rouge">master</code> 分支</p> </li> <li> <p>博客：在 <a href="http://jekyllthemes.org/">Jekyll Themes</a> 上直接下载，或者用 GitHub <code class="highlighter-rouge">clone</code> 到二级域名对应 repo 的 <code class="highlighter-rouge">gh-pages</code>分支</p> </li> </ul> <p><strong>3. 预览</strong></p> <ul> <li> <p>本地预览：<code class="highlighter-rouge">$ jekyll serve</code>，浏览器输入 <code class="highlighter-rouge">http://localhost:4000</code> 本地预览模板效果</p> </li> <li> <p>提交看效果：<code class="highlighter-rouge">commit</code>，<code class="highlighter-rouge">push</code>，页面生效后就能浏览看，看看你的模板在移动端的 Responsive 能力好不好</p> </li> </ul> <p><strong>4. 发布第一篇博文</strong></p> <ul> <li> <p>在 <code class="highlighter-rouge">_posts</code> 下新建名为 <code class="highlighter-rouge">YYYY-MM-DD-artical-title</code> 的 MarkDown 文件</p> </li> <li> <p><a href="http://sspai.com/25137">MarkDown 语法说明</a></p> </li> </ul> <p>###<strong>其他自定义及优化</strong></p> <p><strong>1. 修改模板</strong></p> <ul> <li> <p>小修小改：背景图片、字体、主题颜色、添加 favicon</p> </li> <li> <p>添加模块： About、Categories</p> </li> <li> <p>有用的网站：<a href="http://blog.javachen.com/2013/08/31/my-jekyll-config.html">修改大全</a>； <a href="https://www.google.com/fonts">Google 字体</a>； <a href="http://fontawesome.dashgame.com/">Font Awesome 图标字体库</a>；<a href="http://www.ifreesite.com/color/color-code-converter.htm">色码转换器</a>； <a href="http://rgb.phpddt.com/">色彩对照表</a></p> </li> </ul> <p><strong>2. 增加功能</strong></p> <ul> <li> <p><a href="http://blog.masr.in/geek/add_comment_to_jekyll.html">Disqus 评论模块</a>：Jekyll 不支持数据库，评论模块需要另装，<a href="https://disqus.com/">Disqus</a> 和 国内的<a href="http://duoshuo.com/">多说</a>都不错</p> </li> <li> <p><a href="http://codingtips.kanishkkunal.in/share-buttons-jekyll/">页内分享</a>：除了自己写链接代码外，分享到国内社交平台还可以用<a href="http://share.baidu.com/code/">百度分享</a></p> </li> <li> <p><a href="https://www.google.com/analytics/">Google Analytics</a>：关心博客访问量和流量分析的话，可以安装 Google Analystics 或者<a href="http://tongji.baidu.com/web/welcome/login">百度统计</a></p> </li> <li> <p><a href="http://zyzhang.github.io/blog/2012/08/31/highlight-with-Jekyll-and-Pygments/">代码高亮</a>：MarkDown 原生的代码块没有高亮，可以用 Pygments 选择喜欢的主题，生成 CSS 样式，引用到自己的模板中</p> </li> </ul> <p><strong>3. <a href="http://jekyll.tips/tutorials/seo/">SEO 网站优化</a></strong></p> <p>SEO（Search Engine Optimize) 是专为 Google 或 百度小爬虫能有效找到博客的优化方法。</p> <ul> <li> <p>优化博客标题和描述：用形如 <code class="highlighter-rouge">page.title</code> 或 <code class="highlighter-rouge">page.description</code> 这样的标签，而不是 Hard Code，方便修改</p> </li> <li> <p>优化 URL 结构：用 Permalink 改写博客 URL，最好是以标题关键词的形式</p> </li> <li> <p><a href="http://cn.yizeng.me/2013/05/26/create-a-custom-jekyll-404-page/">自定义 404.html</a>：设置 404 错误页面，把失效或者无效的博客地址引导到主页</p> </li> <li> <p>添加 Sitemap.xml： Sitemap 包含站点结构和博客标题、最近修改时间等内容信息，方便搜索引擎找到</p> </li> <li> <p><a href="http://vdaubry.github.io/2014/10/21/SEO-for-your-Jekyll-blog/">其他尚未使用的方法</a></p> </li> </ul> <p>最后，感谢我的两个模板 <a href="https://github.com/mojombo/tpw">TPW</a> 和 <a href="https://github.com/nandomoreirame/zetsu">Zetsu</a> 让我省了很多力 :D</p> <aside class="share"> <span>Share this to</span> <a href="http://twitter.com/share?text=Jekyll 个人静态博客建站及优化&amp;url=http://code.liqingyao.com/bulid-personal-blog/&amp;hashtags=web,dev,blog,soudev&amp;via=liqingyao"> <i class="fa fa-twitter-square"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://code.liqingyao.com/bulid-personal-blog/"> <i class="fa fa-facebook-square"></i> </a> <a href="https://plus.google.com/share?url=http://code.liqingyao.com/bulid-personal-blog/"> <i class="fa fa-google-plus-square"></i> </a> <a href="http://www.linkedin.com/shareArticle?mini=true&url=http://code.liqingyao.com/bulid-personal-blog/&title=Jekyll 个人静态博客建站及优化&summary=Li Qingyao&source=http://code.liqingyao.com"> <i class="fa fa-linkedin-square"></i> </a> <!-- <a href="https://plus.google.com/share?url=http://code.liqingyao.com/bulid-personal-blog/"> <i class="fa fa-wechat"></i> </a> <a href="http://www.linkedin.com/shareArticle?mini=true&url=http://code.liqingyao.com/bulid-personal-blog/&title=Jekyll 个人静态博客建站及优化&summary=Li Qingyao&source=http://code.liqingyao.com"> <i class="fa fa-weibo"></i> </a> <a href="https://www.qq.com/share?url=http://code.liqingyao.com/bulid-personal-blog/"> <i class="fa fa-qq"></i> </a> --> </aside> <hr> <aside id="comments" class="disqus"> <h2 class="txt-center">Comments</h2> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_shortname = 'codeliqingyao'; var disqus_identifier = '/bulid-personal-blog'; var disqus_title = 'Jekyll 个人静态博客建站及优化'; var disqus_url = 'http://code.liqingyao.com'; /*var disqus_developer = 1;*/ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript> Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a> </noscript> </aside> </div> </article> <footer class="footer t-center"> <div class="container"> <div class="social-icons"> <ul class="text-left"> <li><a href="https://github.com/liqingyao" target="_blank"><i class="fa fa-github"></i></a></li> <li><a href="http://weibo.com/leeleeannie" target="_blank"><i class="fa fa-weibo"></i></a></li> <li><a href="https://www.linkedin.com/in/liqingyao" target="_blank"><i class="fa fa-linkedin"></i></a></li> <li><a href="mailto:qingyao.li@yahoo.com" target="_blank"><i class="fa fa-envelope-o"></i></a></li> </ul> </div> <small>&copy; 2016 Li Qingyao. Made with <a href="http://jekyllrb.com" target="_blank">Jekyll</a> and <i class="icon icon-heart"></i></small> <small>by <a href="http://nandomoreira.me" target="_blank">nandomoreira.me</a></small> </div> </footer> </main> </body> </html></body></html>
<!--
// # Zetsu Jekyll theme - https://github.com/nandomoreriame/zetsu/
// by nandomoreira.me
-->
